// ============================================================================
//
// - Emoji Generator -
//
//   this works by reading all blps in 'this module/assets/Emoji/'
//   if that folder is not created, create it and place any/all blps inside
//   it will ignore all other files and create the spell(s) required
//   spell name created is as follows: "Emoji: + fileName.replace('_', ' ').replace('-', ' ')"
//
//    a quick way to learn all emojis
//    events.Player.OnLogin((player, first) => {
//        GetIDTag('farming-mod', 'emoji').forEach((v, i, arr) => {
//            player.LearnSpell(v)
//        })
//    })
//
// - External scripts -
//   none
//
// ============================================================================

import path from "node:path";
import { std } from "wow/wotlk";
import { MODNAME } from "./datascripts";
const fs = require('fs');

const firstM2Part = `4D443230080100001400000080370000900000000100000050010000010000006001000000000000000000000A000000A001000001000000700500000400000080050000010000000000000000000000010000001007000004000000CA0800000000000000000000010000009A09000001000000AA09000001000000BA09000001000000CA090000010000009837000004000000DC09000001000000EC090000D87DAEBFA956A4BFC00230BF90B1A83FE4EFB63F05989C4102F12441000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000046726F737441726D6F725F4C6F775F48656164000000000000000000000000000000000000000000000000000000000000000000B80B000000000000A0000000FF7F0000000000000000000000000000E021A6BCEE924EBF80CF0D3D954C1E3E6467363FDF120240D1DDA03FFFFF0000FFFFFFFF40000000FFFF00005F035E590000FFFF000000000000000000000000000000000000FFFF000000000000000000000000000000000000FFFF0000000000000000000000000000000000000080000000008EE3783FFFFFFFFF0002000000000000839439940000FFFF000000000000000000000000000000000000FFFF000000000000000000000000000000000100FFFF0100000010050000010000002005000000000080000000008EE3783FFFFFFFFF0000000000000F00A346E64F0000FFFF000000000000000000000000000000000000FFFF000000000000000000000000000000000000FFFF00000000000000000000000000000000BFE9193E2B7AC3BDC615AF3FFFFFFFFF0000000000000F0019AA45550000FFFF000000000000000000000000000000000000FFFF000000000000000000000000000000000000FFFF00000000000000000000000000000000BFE9193E0876C3BDC615AF3FFFFFFFFF0002000000000A002C0F26BC0000FFFF0000000000000000000000000000000000000000010000003005000001000000400500000000FFFF000000000000000000000000000000008B5BAA3DFBAE063E60893B3FFFFFFFFF0000000000000900F2E9CA8A0000FFFF000000000000000000000000000000000000FFFF000000000000000000000000000000000000FFFF0000000000000000000000000000000000000080000000008A589E3FFFFFFFFF0000000000000000D4E7EC490000FFFF000000000000000000000000000000000000FFFF000000000000000000000000000000000000FFFF0000000000000000000000000000000000000080000000008EE3783FFFFFFFFF0002000000000A008F9A42220000FFFF0000000000000000000000000000000000000000010000005005000001000000600500000000FFFF000000000000000000000000000000008B5BAA3D09B1063E60893B3FFFFFFFFF0000000000000F00C23648810000FFFF000000000000000000000000000000000000FFFF000000000000000000000000000000000000FFFF00000000000000000000000000000000847D733D3116273AEF42B23FFFFFFFFF0000000000000F00103AD85B0000FFFF000000000000000000000000000000000000FFFF000000000000000000000000000000000000FFFF00000000000000000000000000000000847D733D2508843CEF42B23F070000001C2A00000000000000000000070000003C2A00000000000000000000010000009C2A0000000000000000000001000000AC2A0000000000000000000001000000BC2A0000000000000000000001000000CC2A00000000000000000000FFFF0000000000000000000000000000F1C48133184A7F3EB4729E3FFF000000010000000000803F6921A2B40000803371F97F3F0020D238000000000000803F7797C1B3184A7FBEB4729E3FFF000000010000000000803F6921A2B40000803387ECD13800A0D138000000000000803FF1C481B3184A7FBE5C403D3FFF000000010000000000803F6921A2B4000080335CACD13870F97F3F000000000000803F7797C133184A7F3E5C403D3FFF000000010000000000803F6921A2B4000080336FF97F3F73F97F3F000000000000803F0000FFFF010000009006000001000000A00600000000FFFF01000000B006000001000000C00600000000FFFF01000000D006000001000000E00600000000FFFF01000000F0060000010000000007000001000000DC2A0000000000000000000001000000EC2A0000000000000000000001000000FC2A00000000000000000000010000000C2B00000000000000000000010000001C2B00000000000000000000010000002C2B00000000000000000000010000003C2B00000000000000000000010000004C2B000000000000000000000000000000000000`
const secondM2Part = `0000009A3700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000640000009A3700004954454D5C4F424A454354434F4D504F4E454E54535C534849454C445C534849454C445F43524553545F415F303153494C5645522E424C5000000000000000005350454C4C535C49434533425F422E424C5000000000000000000000000000005350454C4C535C424C55455F474C4F57442E424C5000000000000000000000005350454C4C535C53544152342E424C50000000000000000000000000000000004954454D5C4F424A454354434F4D504F4E454E54535C414D4D4F5C424C55455F474C4F57322E424C50000000000000005350454C4C535C544F4F4E534D4F4B4531362E424C50000000000000000000005350454C4C535C534E4F57464C414B45332E424C5000000000000000000000004E65777374796C655C456D6F6A695474657874757265735C456D6F74655F416C61726D65642E626C70000100FFFF010000001A090000010000002A0900000100FFFF010000003A090000010000004A0900000100FFFF010000005A090000010000006A0900000100FFFF010000007A090000010000008A090000040000005C2B00000000000000000000040000006C2B00000000000000000000030000007C2B00000000000000000000030000008C2B00000000000000000000030000009C2B0000000000000000000003000000AC2B0000000000000000000004000000BC2B0000000000000000000004000000CC2B0000000000000000000006000000000000000000000000000000130002001300040013000400130004000100000000000000000000000000000000000100020007000000000000000000000000000100020003000000000000000000FFFF0000000000000000000000000000FFFFFFFF29000200BFE9193E2B7AC3BDC615AF3F0200030001000000B05B000001000000C05B00000401000000000000010001000000FFFF01000000D05B000001000000E05B00000000FFFF01000000F05B000001000000005C00000000FFFF01000000105C000001000000205C00000000FFFF01000000305C000001000000405C00000000FFFF01000000505C000001000000605C00000000FFFF01000000705C000001000000805C0000000000000000FFFF01000000905C000001000000A05C0000000000000000FFFF01000000B05C000001000000C05C00000000FFFF01000000D05C000001000000E05C00000000FFFF01000000F05C000001000000005D000003000000105D000003000000205D000003000000505D000003000000605D000003000000705D000003000000805D000000000000000000000000000000000000000000000000000000000000000000000000000000000000CDCCCC3D000020410000803F0000803F0000803F0000803F0000000000000000000000000000E0400000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000020403333333F0000E0406666663F00000000000000000000FFFF01000000A05D000001000000B05D000000000000000000000000000000000000FFFFFFFF29000200BFE9193E0876C3BDC615AF3F0300030001000000C05D000001000000D05D00000401000000000000010001000000FFFF01000000E05D000001000000F05D00000000FFFF01000000005E000001000000105E00000000FFFF01000000205E000001000000305E00000000FFFF01000000405E000001000000505E00000000FFFF01000000605E000001000000705E00000000FFFF01000000805E000001000000905E0000000000000000FFFF01000000A05E000001000000B05E0000000000000000FFFF01000000C05E000001000000D05E00000000FFFF01000000E05E000001000000F05E00000000FFFF01000000005F000001000000105F000003000000205F000003000000305F000003000000605F000003000000705F000003000000805F000003000000905F000000000000000000000000000000000000000000000000000000000000000000000000000000000000CDCCCC3D000020410000803F0000803F0000803F0000803F000000000000000000000000000080C00000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000020403333333F0000E0406666663F00000000000000000000FFFF01000000B05F000001000000C05F000000000000000000000000000000000000FFFFFFFF290002008B5BAA3DFBAE063E60893B3F0400030001000000D05F000001000000E05F00000401000000000000010001000000FFFF01000000F05F000001000000006000000000FFFF010000001060000001000000206000000000FFFF010000003060000001000000406000000000FFFF010000005060000001000000606000000000FFFF010000007060000001000000806000000000FFFF010000009060000001000000A0600000000000000000FFFF01000000B060000001000000C0600000000000000000FFFF01000000D060000001000000E06000000000FFFF01000000F060000001000000006100000000FFFF010000001061000001000000206100000300000030610000030000004061000003000000706100000300000080610000030000009061000003000000A061000000000000000000000000000000000000000000000000000000000000000000000000000000000000CDCCCC3D000020410000803F0000803F0000803F0000803F000000000000000000000000000080C00000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000020403333333F0000E0406666663F00000000000000000000FFFF01000000C061000001000000D061000000000000000000000000000000000000FFFFFFFF2904020000000080000000008A589E3F0500040001000000E061000001000000F06100000402000000000000010001000000FFFF010000000062000001000000106200000000FFFF010000002062000001000000306200000000FFFF010000004062000001000000506200000000FFFF010000006062000001000000706200000000FFFF010000008062000001000000906200000000FFFF01000000A062000001000000B0620000000000000000FFFF01000000C062000001000000D0620000000000000000FFFF01000000E062000001000000F06200000000FFFF010000000063000001000000106300000000FFFF01000000206300000100000030630000030000004063000003000000506300000300000080630000030000009063000003000000A063000003000000B063000000000000000000000000000000000000000000000000000000000000000000000000000000000000CDCCCC3D000020410000803F9A99193F9A99993F0000803F000000000000000000000000CCCC2C400000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000020403333333F0000E0406666663F00000000000000000000FFFF01000000D063000001000000E063000000000000000000000000000000000000FFFFFFFF2900020000000080000000008EE3783F0600050001000000F063000001000000006400000401000000000000080008000000FFFF010000001064000001000000206400000000FFFF010000003064000001000000406400000000FFFF010000005064000001000000606400000000FFFF010000007064000001000000806400000000FFFF010000009064000001000000A06400000000FFFF01000000B064000001000000C0640000000000000000FFFF01000000D064000001000000E0640000000000000000FFFF01000000F064000001000000006500000000FFFF010000001065000001000000206500000000FFFF0100000030650000010000004065000003000000506500000300000060650000030000009065000003000000A065000003000000B065000003000000C0650000000000000000000004000000E065000004000000F065000000000000000000000000000000000000CDCCCC3D000020410000803F9A99193F9A99993F0000803F000000000000000000000000000060400000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000020403333333F0000E0406666663F00000000000000000000FFFF0100000000660000010000001066000000000000000000000000000000000000FFFFFFFF290002008B5BAA3D09B1063E60893B3F07000300010000002066000001000000306600000401000000000000010001000000FFFF010000004066000001000000506600000000FFFF010000006066000001000000706600000000FFFF010000008066000001000000906600000000FFFF01000000A066000001000000B06600000000FFFF01000000C066000001000000D06600000000FFFF01000000E066000001000000F0660000000000000000FFFF01000000006700000100000010670000000000000000FFFF010000002067000001000000306700000000FFFF010000004067000001000000506700000000FFFF010000006067000001000000706700000300000080670000030000009067000003000000C067000003000000D067000003000000E067000003000000F067000000000000000000000000000000000000000000000000000000000000000000000000000000000000CDCCCC3D000020410000803F0000803F0000803F0000803F0000000000000000000000000000E0400000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000020403333333F0000E0406666663F00000000000000000000FFFF0100000010680000010000002068000000000000000000000000000000000000FFFFFFFF09000200847D733D3116273AEF42B23F08000500010000003068000001000000406800000401000000000000080008000000FFFF010000005068000001000000606800000000FFFF010000007068000001000000806800000000FFFF010000009068000001000000A06800000000FFFF01000000B068000001000000C06800000000FFFF01000000D068000001000000E06800000000FFFF01000000F06800000100000000690000000000000000FFFF01000000106900000100000020690000000000000000FFFF010000003069000001000000406900000000FFFF010000005069000001000000606900000000FFFF01000000706900000100000080690000030000009069000003000000A069000003000000D069000003000000E069000003000000F069000003000000006A0000000000000000000004000000206A000004000000306A0000000000000000000000000000000000000000003F000020410000803F0000803F0000803F0000803FCDCC4C3D00000000000000000000803F0000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000020403333333F0000E0406666663F00000000000000000000FFFF01000000406A000001000000506A000000000000000000000000000000000000FFFFFFFF29000200847D733D2508843CEF42B23F0900060001000000606A000001000000706A00000401000000000000010001000000FFFF01000000806A000001000000906A00000000FFFF01000000A06A000001000000B06A00000000FFFF01000000C06A000001000000D06A00000000FFFF01000000E06A000001000000F06A00000000FFFF01000000006B000001000000106B00000000FFFF01000000206B000001000000306B0000000000000000FFFF01000000406B000001000000506B0000000000000000FFFF01000000606B000001000000706B00000000FFFF01000000806B000001000000906B00000000FFFF01000000A06B000001000000B06B000003000000C06B000003000000D06B000003000000006C000003000000106C000003000000206C000003000000306C0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003F000020410000803F0000803F0000803F0000803F000000000000000000000000000000C00000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000020403333333F0000E0406666663F00000000000000000000FFFF01000000506C000001000000606C000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000306E0000000000000000000001000000406E0000000000000000000001000000506E0000000000000000000001000000606E0000000000000000000001000000706E0000000000000000000001000000806E0000000000000000000001000000906E0000000000000000000001000000A06E0000000000000000000001000000B06E0000000000000000000001000000C06E0000000000000000000001000000D06E0000000000000000000001000000E06E0000000000000000000001000000F06E0000000000000000000001000000006F0000000000000000000001000000106F0000000000000000000001000000206F0000000000000000000001000000306F0000000000000000000001000000406F0000000000000000000001000000506F0000000000000000000001000000606F0000000000000000000000000040FF7F00000000000000000000000000000000284200007F4300007F4300007F4300007F43000000000100764300007F4300000000000000000000000000000040FF7F00000000000000000000FF7FFF7F00000000000000000000000000000040FF7F00000000000000000000ABAAAA3CABAAAA3C5555553E5555553EABAAAA3CABAAAA3C00000000000000000D000000706F000000000000000000000D000000B06F00000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000C06F0000000000000000000001000000D06F0000000000000000000001000000E06F0000000000000000000001000000F06F000000000000000000000100000000700000000000000000000001000000107000000000000000000000010000002070000000000000000000000100000030700000000000000000000001000000407000000000000000000000010000005070000000000000000000000100000060700000000000000000000001000000707000000000000000000000010000008070000000000000000000000100000090700000000000000000000001000000A0700000000000000000000001000000B0700000000000000000000001000000C0700000000000000000000001000000D0700000000000000000000001000000E0700000000000000000000001000000F0700000000000000000000000000040FF7F00000000000000000000000090420000000000007F4300007F4300007F4300007F43000000000100764300007F4300000000000000000000000000000040FF7F00000000000000000000FF7FFF7F00000000000000000000000000000040FF7F00000000000000000000ABAAAA3CABAAAA3CC7711C3EC7711C3EABAAAA3CABAAAA3C00000000000000000D0000000071000000000000000000000D0000004071000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000005071000000000000000000000100000060710000000000000000000001000000707100000000000000000000010000008071000000000000000000000100000090710000000000000000000001000000A0710000000000000000000001000000B0710000000000000000000001000000C0710000000000000000000001000000D0710000000000000000000001000000E0710000000000000000000001000000F0710000000000000000000001000000007200000000000000000000010000001072000000000000000000000100000020720000000000000000000001000000307200000000000000000000010000004072000000000000000000000100000050720000000000000000000001000000607200000000000000000000010000007072000000000000000000000100000080720000000000000000000000000040FF7F00000000000000000000000090420000000000007F4300007F4300007F4300007F43000000000100764300007F4300000000000000000000000000000040FF7F00000000000000000000FF7FFF7F00000000000000000000000000000040FF7F00000000000000000000ABAAAA3CABAAAA3C398E633C398E633CABAAAA3CABAAAA3C00000000000000000B0000009072000000000000000000000B000000C07200000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000D0720000000000000000000001000000E0720000000000000000000001000000F072000000000000000000000100000000730000000000000000000001000000107300000000000000000000010000002073000000000000000000000100000030730000000000000000000001000000407300000000000000000000010000005073000000000000000000000100000060730000000000000000000001000000707300000000000000000000010000008073000000000000000000000100000090730000000000000000000001000000A0730000000000000000000001000000B0730000000000000000000001000000C0730000000000000000000001000000D0730000000000000000000001000000E0730000000000000000000001000000F073000000000000000000000100000000740000000000000000000000000040FF7F0000000000000000000000007F4300007F4300007F43000035430000384300007F43010040410000000000007F4300000000000000000000000000000040FF7F00000000000000000000FF7FD75700000000000000000000000000000040FF7F00000000000000000000832DD83D832DD83DDDDDDD3DDDDDDD3D5404E9375404E9370000000000000000030000001074000000000000000000000300000020740000000000000000000000000000000000000000000000000000000000000000000000000000000000000100000030740000000000000000000001000000407400000000000000000000010000005074000000000000000000000100000060740000000000000000000001000000707400000000000000000000010000008074000000000000000000000100000090740000000000000000000001000000A0740000000000000000000001000000B0740000000000000000000001000000C0740000000000000000000001000000D0740000000000000000000001000000E0740000000000000000000001000000F074000000000000000000000100000000750000000000000000000001000000107500000000000000000000010000002075000000000000000000000100000030750000000000000000000001000000407500000000000000000000010000005075000000000000000000000100000060750000000000000000000000000040FF7F0000000000000000000000007F4300007F4300007F43010050430100614300007F43010040410000000000007F4300000000000000000000000000000040FF7F00000000000000000000FF7FBD3D00000000000000000000000000000040FF7F00000000000000000000A54F7A3EA54F7A3E8FE3B83E8FE3B83EFB7E123FFB7E123F0000000000000000000000400040FF7F000000000000000000001000110020000000000000000000030000007075000000000000000000000300000080750000000000000000000000000000000000000000000000000000000000000000000000000000000000000100000090750000000000000000000001000000A0750000000000000000000001000000B0750000000000000000000001000000C0750000000000000000000001000000D0750000000000000000000001000000E0750000000000000000000001000000F075000000000000000000000100000000760000000000000000000001000000107600000000000000000000010000002076000000000000000000000100000030760000000000000000000001000000407600000000000000000000010000005076000000000000000000000100000060760000000000000000000001000000707600000000000000000000010000008076000000000000000000000100000090760000000000000000000001000000A0760000000000000000000001000000B0760000000000000000000001000000C0760000000000000000000000000040FF7F00000000000000000000000090420000000000007F4300007F4300007F4300007F43000000000100764300007F4300000000000000000000000000000040FF7F00000000000000000000FF7FFF7F00000000000000000000000000000040FF7F00000000000000000000ABAAAA3CABAAAA3CE4380E3EE4380E3EABAAAA3CABAAAA3C00000000000000000B000000D076000000000000000000000B000000007700000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000107700000000000000000000010000002077000000000000000000000100000030770000000000000000000001000000407700000000000000000000010000005077000000000000000000000100000060770000000000000000000001000000707700000000000000000000010000008077000000000000000000000100000090770000000000000000000001000000A0770000000000000000000001000000B0770000000000000000000001000000C0770000000000000000000001000000D0770000000000000000000001000000E0770000000000000000000001000000F07700000000000000000000010000000078000000000000000000000100000010780000000000000000000001000000207800000000000000000000010000003078000000000000000000000100000040780000000000000000000000000040FF7F000000000000000000000000A24200002C4301007343000012430100504300007F4300007F4300007F4300007F4300000000000000000000000000000040FF7F000000000000000000002828D15100000000000000000000000000000040FF7F00000000000000000000176C413E176C413E721C873E721C873E5555D53E5555D53E0000000000000000000000400040FF7F0000000000000000000010001100200000000000000000000300000050780000000000000000000003000000607800000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000707800000000000000000000010000008078000000000000000000000100000090780000000000000000000001000000A0780000000000000000000001000000B0780000000000000000000001000000C0780000000000000000000001000000D0780000000000000000000001000000E0780000000000000000000001000000F078000000000000000000000100000000790000000000000000000001000000107900000000000000000000010000002079000000000000000000000100000030790000000000000000000001000000407900000000000000000000010000005079000000000000000000000100000060790000000000000000000001000000707900000000000000000000010000008079000000000000000000000100000090790000000000000000000001000000A0790000000000000000000000000040FF7F000000000000000000000100C042000003430100744300003A4301005D43010078430100424300001A430100514300000000000000000000000000000040FF7F000000000000000000008000575700000000000000000000000000000040FF7F00000000000000000000F5499F3CF5499F3CABAA2A3DABAA2A3D398E633C398E633C000000000000000003000000B0790000000000000000000003000000C079000000000000000000000000000064000000C80000002C010000F00A0000540B0000B80B0000000000000000000000000000000000002E33D33F3333D33F020000402F33B33FCCCCCC3F3733B33FFCFFBF3F0000C03F0400C03FFCFFBF3F0000C03F0400C03FF9FFBF3FCCCCCC3F3733B33F00000000000000000000403F000000000000000000000000050D0000000000000000000000000000BF5906D2BF5906D20000000000000000050D0000000000000000000000000000BF5906D2BF5906D2000000000000000000000000000000000000000000000000A3A2A23E9D9C1C3FF2F0703F0000000000000000000000000000000000000000FF7F00000000000000000000000000000000000000000000000000000000000000000000B5B4B43E0000803F0000000000000000000000000000000000000000FF7F0000000000000000000000000000000000008600000077080000B80B00000000FF7FFF7F0000000000000000000000000000BA080000B80B000000000000FF7FFF7FCD0C0000000000000000000000000000BA080000B80B00000000000000400040660600000000000000000000000000009001000082090000B80B000000003D6A846BCD0C000000000000000000000000000000000000000000000000E4388E3E00000000000000000000000000000000000000000000000000000000CCCCCC3D000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000DB0FC940000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000CDCC4C3E0000000000000000000000000000000000000000000000000000000000007041000000000000000000000000000000000000000000000000000000001DC7F13E00000000000000000000000000000000000000000000000000000000575AB73E0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004E010000F4010000BC020000630300008F040000360500008306000008070000D0070000340800001E090000600900000000000000000000000000000001000100010001000100010000000000000000000000000000000000000000E4388E3E00000000000000000000000000000000000000000000000000000000CCCCCC3D000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000DB0FC940000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000CDCC4C3E000000000000000000000000000000000000000000000000000000000000F040000000000000000000000000000000000000000000000000000000001DC7F13E00000000000000000000000000000000000000000000000000000000A75BB73E0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004E010000F4010000BC020000630300008F040000360500008306000008070000D0070000340800001E090000600900000000000000000000000000000001000100010001000100010000000000000000000000000000000000000000E4388E3E00000000000000000000000000000000000000000000000000000000EB51B83D000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000DB0FC940000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000CDCC4C3E000000000000000000000000000000000000000000000000000000000000F04000000000000000000000000000000000000000000000000000000000ABAAAA3D00000000000000000000000000000000000000000000000000000000721CA73E000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000F4010000BC0200002B040000D2040000BB050000400600004B070000AF07000098080000DB080000000000000001000100010001000100000000000000000000000000000000000000000000FBA4DF3F000000000000000000000000000000000000000000000000000000000000003F00000000000000000000000000000000000000000000000000000000DB0F4940000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000E438DE400000000000000000000000000000000000000000000000000000000048E11A3F000000000000000000000000000000000000000000000000000000000000E5420000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005555D53E00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000064000000C80000000000000000010000000000000000000000000000000000000000000000000000000000004FFAA43F00000000000000000000000000000000000000000000000000000000B81E853E00000000000000000000000000000000000000000000000000000000DB0F494000000000000000000000000000000000000000000000000000000000DB0FC940000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000CDCC4C3F00000000000000000000000000000000000000000000000000000000CDCCBB4200000000000000000000000000000000000000000000000000000000398E633D00000000000000000000000000000000000000000000000000000000398E633D000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000A7000000B80B0000000000000100010000000000000000000000000000000000000000000000000000000000E4388E3E00000000000000000000000000000000000000000000000000000000EB51B83D000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000DB0FC940000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000CDCC4C3E000000000000000000000000000000000000000000000000000000000000704100000000000000000000000000000000000000000000000000000000ABAAAA3D00000000000000000000000000000000000000000000000000000000721CA73E000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000F4010000BC0200002B040000D2040000BB050000400600004B070000AF07000098080000DB080000000000000001000100010001000100000000000000000000000000000000000000000000E4380EBF00000000000000000000000000000000000000000000000000000000CCCC4C3E000000000000000000000000000000000000000000000000000000009656683E00000000000000000000000000000000000000000000000000000000DB0FC9400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006666E63F0000000000000000000000000000000000000000000000000000000033333B41000000000000000000000000000000000000000000000000000000002857DD3E000000000000000000000000000000000000000000000000000000009A99993D00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000077080000B80B0000000000000100010000000000000000000000000000000000000000000000000000000000E4380EBF000000000000000000000000000000000000000000000000000000000000003F00000000000000000000000000000000000000000000000000000000C2B8B23E00000000000000000000000000000000000000000000000000000000DB0FC940000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000AE47114000000000000000000000000000000000000000000000000000000000CECC344100000000000000000000000000000000000000000000000000000000C2160C3F000000000000000000000000000000000000000000000000000000009A99993D000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000DC050000B80B0000000000000100010000000000000000000000000000000000456D6F6A695F54656D706C617465000000000000000000000000`
const skinPart = '534B494E040000004000000006000000500000000400000060000000010000007000000001000000A0000000000000000000000000000000000000000000000000000100020003000000000000000000000001000200020003000000000000000001020300010203000102030001020300000000000004000000060001000000010001000000000000000000E2127D3F0000000000000000E2127D3F5384B43E0000000000000000000000000000010000000000000000000000000000000000'
const texturePath = 'Emoji\\'

std.Events.patch('emoji-creation', async () => {
    let emojiPath = path.join('modules', 'baja-core/emoji-module', 'assets') + '/' + texturePath
    if (fs.existsSync(emojiPath)) {
        const dir = await fs.promises.opendir(emojiPath)
        for await (const dirent of dir) {
            if (dirent.name.endsWith('.blp')) {
                let fileName = dirent.name.split('.')[0]
                createM2andSkin(fileName)
                let newSpell = std.Spells.create(MODNAME, fileName, baseSpell.ID);
                newSpell.Tags.add(MODNAME, 'emoji');
                newSpell.Name.enGB.set('Emoji: ' + (fileName.replace('_', ' ').replace('-', ' ')))
                    .Icon.setFullPath(texturePath + fileName)
                    .Visual.getRefCopy()
                    .PrecastKit.set(0)
                    .CastKit.set(0)
                    .ImpactKit.getRefCopy().HeadEffect.getRefCopy()
                    .Filename.set(texturePath + fileName + '.mdx')
                    .Name.set(fileName)
            }
        }
    }
})

function createM2andSkin(textureName: string) {
    const tpath = texturePath + textureName
    const texture = tpath + '.blp';
    const writeM2 = Buffer.from((firstM2Part + texture.length.toString(16) + secondM2Part + convertToHex(texture) + '00'), "hex")

    fs.writeFile(path.join('modules', 'baja-core/emoji-module', 'assets') + '/' + tpath + '.M2', writeM2, () => { });
    const writeSkin = Buffer.from(skinPart, "hex")
    fs.writeFile(path.join('modules', 'baja-core/emoji-module', 'assets') + '/' + tpath + '00.skin', writeSkin, () => { });
}

function convertToHex(str: string) {
    var hex = '';
    for (var i = 0; i < str.length; i++) {
        hex += '' + str.charCodeAt(i).toString(16);
    }
    return hex;
}

let baseSpell = std.Spells.create(MODNAME, "EmojiBase", 168);
baseSpell.Duration.setSimple(1, 0, 1)
    .Cooldown.set(10000, 0, 0, 0)
    .Name.enGB.set('Emoji Base')
    .Subtext.enGB.set('Emojis')
    .Description.enGB.set('Throw up an Emoji')
    .AuraDescription.enGB.set('Emoji Base')